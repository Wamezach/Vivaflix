const movies = [
   {
 "title": "Ang Kapitbahay",
  "duration": "120min",
  "genre": "Romance",
  "quality": "HD",
  "img": "Vivaflix/Images/ANG_KAPITBAHAY.png",
  "url": "https://mega.nz/embed/Z4wUFB7Y#ufSzwuD76i6OOC1AivD8rHIS8hEZ3kvAGRJmc5C6fn4",
  "synopsis": "Thriller about an innocent college boy and the woman who would introduce him to manhood. Alex meets his new sultry neighbor, Rose, who awakens his sexual desire and gives him his first sexual experience only to learn a trap awaits him"
},
   {
  "title": "Pintor at Paraluman",
  "duration": "110min",
  "genre": "Romance",
  "quality": "HD",
  "img": "Images/Pintor_at_Paraluman.png",
  "url": "https://mega.nz/embed/4oQXBaqJ#c-X0NMlZz4RYLI4E7U-nvrtLoeG_q-ilF8IKTe8fJzc",
  "synopsis": "An artist meets a mysterious woman who becomes his model for his nude artwork. He then fantasizes making love to her; however, he always remembers her number one rule - she can't be touched."
},
    {
  "title": "Back Rider",
  "duration": "120min",
  "genre": "Romance",
 "quality": "HD",
  "img": "Images/BackRider.png",
  "url": "https://mega.nz/embed/J0wGERKR#cZKGlbYr-lwDtH0Y9zP5nwxdRrOuN-IXAr-jBiSlTVI",
  "synopsis": "Faith is a private massage therapist. After a nasty break up with her gaming and crypto addicted boyfriend, she finds comfort in her rich, and seemingly kind client, but finds herself in a passionate and perilous situation."
},
    {
  "title": "Baligtaran",
  "duration": "120min",
  "genre": "Romance",
 "quality": "HD",
  "img": "Images/Baligtaran.png",
  "url": "https://mega.nz/embed/Jwx0FKZQ#m__hQPVqh7P4_9Vmh-qFkSS8SlOHvJ8hBl-uM_Li0yA",
  "synopsis": "Kat a beautiful DJ who immediately catches the eye of pansexual woman Denise. But while Kat falls for Denise, she's just one of the many partners of Denise. Will Kat learn to be okay with their set-up or will Denise change her way for Kat?"
},
   {
  "title": "Balinsasayaw",
  "duration": "120min",
  "genre": "Romance",
 "quality": "HD",
  "img": "Images/Balinsasayaw.png",
  "url": "https://mega.nz/embed/dgoHhCoT#YZII_YkfE-c05_rYFYFhfzAHdg6qQZcZgTa91ynRjvE",
  "synopsis": "A rich woman marries a charming womanizer who conspires with his wife's best friend. When all the revelations are exposed, the tables suddenly turn."
},
{
  "title": "Bedspacer",
  "duration": "120min",
  "genre": "Romance",
 "quality": "HD",
  "img": "Images/Bedspacer.png",
  "url": "https://mega.nz/embed/BgYzQCrD#DT1oyja2CSSmE8RFgaOQZaWBm2XOJm9qsOXFPl6MPGI",
  "synopsis": "Janice's steamy obsession to imitate Lexi propels them to campus stardom. But dark secrets blur the lines between authenticity and seductive deception."
},
    {
  "title": "Boss Maam",
  "duration": "120min",
  "genre": "Romance",
  "quality": "HD",
  "img": "Images/Boss_Maam.png",
  "url": "https://mega.nz/embed/Yo4FCB6I#aOQ5k2H98wmJPIWrNileOvVbONRptvxD4u48etZMdT0",
  "synopsis": "When a terror female boss was blackmailed by her assistant, she has no choice but to obey and play with her."
},
    {
  "title": "Butas",
  "duration": "120min",
  "genre": "Romance",
  "quality": "HD",
  "img": "Images/Butas.png",
  "url": "https://mega.nz/embed/F9ZzhAga#E9bzSEt2kNWTKxuCigokWU86cLRxjjRPIMQTPNRx0qQ",
  "synopsis": "Witness how lives of four young people who have various sexual quirks and inhibitions intertwine as they live together in a snug boarding house."
},
  {
  "title": "Cheaters",
  "duration": "120min",
  "genre": "Romance",
  "quality": "HD",
  "img": "Images/Cheaters.png",
  "url": "https://mega.nz/embed/40ZVSJTZ#R0h868ZldzTEvpxiYR6pw_Y0AVqo0CZioG_SfbyKshQ",
  "synopsis": "Two strangers meet and have strong sexual connection with each other, only to find out that they're both in relationship with others. How can they sustain a relationship that started with sex and cheating?"
},
    {
  "title": "Cita",
  "duration": "120min",
  "genre": "Romance",
  "quality": "HD",
  "img": "Images/Cita.png",
  "url": "https://mega.nz/embed/s151FCID#cCz2Glt2xiWlwolIuRC2zfC1oQBfBZh_F9ClY7z3Az0",
  "synopsis": "A sexually charged story about a young woman who secretly sleeps with her husband's son. The two form an alliance to kill her husband but fate has other plans for Cita."
},
    {
  "title": "Daddy Sitter",
  "duration": "120min",
  "genre": "Romance",
  "quality": "HD",
  "img": "Images/DaddySitter.png",
  "url": "https://mega.nz/embed/VoJiFYZC#5iYpsuo0k0FiUJkEO-TAe73GjiXRc90BbkQVuaI8K4s",
  "synopsis": "Mara, a student taking on an unusual ''daddysitter'' job. As she grows close to her wealthy, ill client, his estranged son's return complicates everything."
},
    {
  "title": "Dayo",
  "duration": "120min",
  "genre": "Romance",
  "quality": "HD",
  "img": "Images/Dayo.png",
  "url": "https://mega.nz/embed/M45RiBSD#Dvs7863KYmKPoAH4BvsgIHL-4ypt1OAwwpPm81qt-dU",
  "synopsis": "A club dancer leaves everything and starts a new life in a place where nobody knows her. But it seems that desire and temptation follow her wherever she goes."
},
    {
  "title": "Dirty Ice Cream",
  "duration": "120min",
  "genre": "Romance",
  "quality": "HD",
  "img": "Images/Dirty_Icecream.png",
  "url": "https://mega.nz/embed/qRF3DZRT#FqSDGJHeRF0Vn_O0r7hkQl2rCPTyyb-aBaAEfmLQjsI",
  "synopsis": "Villagers are experiencing an extreme heat. Two hot ice cream vendors come to the village to sell ice cream. With electricity out, the women of the subdivision take turns having the vendors satisfy their every needs."
},
    {
  "title": "Donselya",
  "duration": "100min",
  "genre": "Romance",
  "quality": "HD",
  "img": "Images/Donselya.png",
  "url": "https://mega.nz/embed/TJd3HaiK#01HDci7cx3STFhMVXX19IVSlGcDu5kTYMpkpLEScxB0",
  "synopsis": "An 18-year-old virgin, Iris, enters a marriage of convenience with wealthy widower Joaquin for financial gain. However, the discovery of her deceit regarding her purity leads to a disastrous honeymoon."
},
 {
  "title": "Eks",
  "duration": "100min",
  "genre": "Romance",
  "quality": "HD",
  "img": "Images/Eks.png",
  "url": "https://mega.nz/embed/KRF0laCA#rZcIFGNlL2S2k763yTkRep78r3m94mGmeDZfvF9B4zg",
  "synopsis": "Three compelling stories in one erotic experience. Yen Durano plays three different women in three titillating stories."
},
    {
  "title": "Hiraya",
  "duration": "119min",
  "genre": "Romance",
  "quality": "HD",
  "img": "Images/Hiraya.png",
  "url": "https://mega.nz/embed/bFE0GBpD#Gu8y3ukYNGwWwNejujyokv1SMeO3-O6I9zePMfRWhuc",
  "synopsis": "Hiraya is a mysterious woman found unconscious in a river. She wakes up not remembering anything and is unable to speak. The townspeople take advantage of Hiraya, but it seems that those who do, always end up in misfortune."
},
  {
  "title": "Huwad",
  "duration": "119min",
  "genre": "Romance",
  "quality": "HD",
  "img": "Images/Huwad.png",
  "url": "https://mega.nz/embed/iUNyCJ7S#Gn4tEqxeCAVs4ISUk45lY0cQurwMdo9_XXFsWJ26Ado",
  "synopsis": "When Romina learns that her husband has been cheating on her, she turns to the town's folk healer for help and obtains a love potion. But it seems the potion is working on everyone except her husband."
},
   {
  "title": "Init",
  "duration": "119min",
  "genre": "Romance",
  "quality": "HD",
  "img": "Images/Init.png",
  "url": "https://mega.nz/embed/3UVXHRZQ#W0PholKh0dwEu0BppfYSar3jD_S_S1SOT7fA1cfth5E",
  "synopsis": "When a young barrio lass moves in to the city to study, she lives in a boarding house with other college students. Unknown to them, behind her shy and timid personality is a woman with insatiable hunger for sex."
},
  {
  "title": "Kasalo",
  "duration": "48min",
  "genre": "Romance",
  "quality": "HD",
  "img": "Images/Kasalo.png",
  "url": "https://mega.nz/embed/jQdhwSbT#YnPdUPy9_JfU37gg9i1U3sQOMrSQ5YCs9vvipRXWlfk",
  "synopsis": "Two strangers meet through a ride-sharing app and find themselves sharing more than what's expected. Both having problems with their respective marital lives, they find comfort in each other's company."
},
    {
  "title": "Kabit",
  "duration": "126min",
  "genre": "Romance",
  "quality": "HD",
  "img": "Images/Kabit.png",
  "url": "https://mega.nz/embed/fRcRCJKD#ys9DsLx3zbNUL3DvqKFttxl91pWMlwUFAdfNRamJaQg",
  "synopsis": "Laura accepts the role in this play to rebel against her mother. The director pushes her to bring out her vulnerability and anger, hoping they will show these emotions on stage."
},
/// 20
  {
  "title": "Kabitan",
  "duration": "124min",
  "genre": "Romance",
  "quality": "HD",
  "img": "Images/Kabitan.png",
  "url": "https://mega.nz/embed/fFNxFICA#XMrx5_3NdTE2Pupq7_c-Y6aQPLdQrea8t-E_ssaVVus",
  "synopsis": "Alice, a depressed mistress, forms a deep emotional and sexual bond with Mika, her neighbor, who is also a mistress. Then, the inevitable happens, they fall for each other."
},
    {
  "title": "Karinyo Brutal",
  "duration": "91min",
  "genre": "Romance",
  "quality": "HD",
  "img": "Images/Karinyo_Brutal.png",
  "url": "https://mega.nz/embed/jN8wBLiT#Lq3TUG9slMPz1bWz8bUIJKHmJNZ9UjHYjxqeDZyj0zg",
  "synopsis": "When a battered mistress meets her neighbor, she knows he will be her perfect escape plan. But things turn chaotic when their plan backfires."
},
{
  "title": "Kaskasero",
  "duration": "90min",
  "genre": "Romance",
  "quality": "HD",
  "img": "Images/Kaskasero.png",
  "url": "https://mega.nz/embed/nNkykRpC#q9PPoFAfsJjjxVU2DwDlsiLgx4OR1BP6jpRgPzJ1nGA",
  "synopsis": "Talented mechanic Migs gets drawn into illegal street racing by a charming customer, Gabbi. As he delves deeper, learning Gabbi's troubled past, Migs' reckless choices jeopardize their bond."
},
    {
  "title": "Kalikot",
  "duration": "49min",
  "genre": "Romance",
  "quality": "HD",
  "img": "Images/Kalikot.png",
  "url": "https://mega.nz/embed/XIEQhAZC#zW4fOvuM43DnGfAWVSIwaHieX82_yjMDlo2KRN7Hb8c",
  "synopsis": "al, a professor, moves near an auto shop. Arnel, a repairman, is attracted to her after she brings her car for repair. Their relationship develops, but they face challenges navigating it while Arnel works at the shop."
},
    { title: "Batman Vs Superman", duration: "120 Min", genre: "Thriller", img: "m3.jpg" },
    { title: "John Wick: Chapter 2", duration: "120 Min", genre: "Adventure", img: "m4.jpg" },
    { title: "Aquaman", duration: "120 Min", genre: "Action", img: "m5.jpg" },
    { title: "Black Panther", duration: "120 Min", genre: "Action", img: "m6.jpg" },
    { title: "Thor", duration: "120 Min", genre: "Action", img: "m7.jpg" },
    { title: "Bumblebee", duration: "120 Min", genre: "Action", img: "m8.png" },
    { title: "Mortal Engines", duration: "120 Min", genre: "Action", img: "m9.jpg" },
    { title: "Underworld: Blood Wars", duration: "120 Min", genre: "Action", img: "m10.jpg" },
    { title: "Inception", duration: "148 Min", genre: "Science Fiction", img: "m11.jpg" },
    { title: "The Dark Knight", duration: "152 Min", genre: "Action", img: "m12.jpg" },
    { title: "Toy Story 4", duration: "100 Min", genre: "Animation", img: "m13.jpg" },
    { title: "Spider-Man: Far From Home", duration: "129 Min", genre: "Action", img: "m14.jpg" },
    { title: "Guardians of the Galaxy", duration: "121 Min", genre: "Action", img: "m15.jpg" },
    { title: "The Lion King", duration: "118 Min", genre: "Animation", img: "m16.jpg" },
    { title: "Frozen II", duration: "103 Min", genre: "Animation", img: "m17.jpg" },
    { title: "Wonder Woman 1984", duration: "151 Min", genre: "Action", img: "m18.jpg" },
    { title: "Black Widow", duration: "134 Min", genre: "Action", img: "m19.jpg" },
    { title: "Shang-Chi", duration: "132 Min", genre: "Action", img: "m20.jpg" },
    { title: "Veil", duration: "120 Min", genre: "Action", img: "m1.jpg", url: "venom.html" },
    { title: "Veil2", duration: "120 Min", genre: "Action", img: "m1.jpg", url: "venom.html" }, // Removed duplicates
{ title: "Ang Kapitbahay", duration: "120 Min", genre: "Action", img: "Images/ANG_KAPITBAHAY.png", url: "https://mega.nz/embed/Z4wUFB7Y#ufSzwuD76i6OOC1AivD8rHIS8hEZ3kvAGRJmc5C6fn4", synopsis: "Thriller about an innocent college boy and the woman who would introduce him to manhood. Alex meets his new sultry neighbor, Rose, who awakens his sexual desire and gives him his first sexual experience only to learn a trap awaits him" },
    { title: "Pintor at Paraluman", duration: "120 Min", genre: "Adventure", img: "Images/Pintor_at_Paraluman.png", url: "https://mega.nz/embed/4oQXBaqJ#c-X0NMlZz4RYLI4E7U-nvrtLoeG_q-ilF8IKTe8fJzc" },
    { title: "Batman Vs Superman", duration: "120 Min", genre: "Thriller", img: "m3.jpg" },
    { title: "John Wick: Chapter 2", duration: "120 Min", genre: "Adventure", img: "m4.jpg" },
    { title: "Aquaman", duration: "120 Min", genre: "Action", img: "m5.jpg" },
    { title: "Black Panther", duration: "120 Min", genre: "Action", img: "m6.jpg" },
    { title: "Thor", duration: "120 Min", genre: "Action", img: "m7.jpg" },
    { title: "Bumblebee", duration: "120 Min", genre: "Action", img: "m8.png" },
    { title: "Mortal Engines", duration: "120 Min", genre: "Action", img: "m9.jpg" },
    { title: "Underworld: Blood Wars", duration: "120 Min", genre: "Action", img: "m10.jpg" },
    { title: "Inception", duration: "148 Min", genre: "Science Fiction", img: "m11.jpg" },
    { title: "The Dark Knight", duration: "152 Min", genre: "Action", img: "m12.jpg" },
    { title: "Toy Story 4", duration: "100 Min", genre: "Animation", img: "m13.jpg" },
    { title: "Spider-Man: Far From Home", duration: "129 Min", genre: "Action", img: "m14.jpg" },
    { title: "Guardians of the Galaxy", duration: "121 Min", genre: "Action", img: "m15.jpg" },
    { title: "The Lion King", duration: "118 Min", genre: "Animation", img: "m16.jpg" },
    { title: "Frozen II", duration: "103 Min", genre: "Animation", img: "m17.jpg" },
    { title: "Wonder Woman 1984", duration: "151 Min", genre: "Action", img: "m18.jpg" },
    { title: "Black Widow", duration: "134 Min", genre: "Action", img: "m19.jpg" },
    { title: "Shang-Chi", duration: "132 Min", genre: "Action", img: "m20.jpg" },
    { title: "Veil", duration: "120 Min", genre: "Action", img: "m1.jpg", url: "venom.html" },
    { title: "Veil2", duration: "120 Min", genre: "Action", img: "m1.jpg", url: "venom.html" } // Removed duplicates
];

const moviesPerPage = 20;
let currentPage = 1;

function searchMovies() {
  const query = document.querySelector('.search-box').value.toLowerCase().trim();
  const movieContainer = document.getElementById('movie-container');

  // Clear previous results
  movieContainer.innerHTML = '';

  // Perform search only if there is a non-empty query
  if (query) {
    const loadingMessage = document.createElement('p');
    loadingMessage.textContent = 'Searching...';
    movieContainer.appendChild(loadingMessage);

    // Filter movies based on the query
    const filteredMovies = movies.filter(movie => movie.title.toLowerCase().includes(query));

    // Simulate a delay for loading feedback
    setTimeout(() => {
      movieContainer.innerHTML = ''; // Clear loading message

      if (filteredMovies.length > 0) {
        displayMovies(filteredMovies); // Display filtered movies
      } else {
        // No results found - reload the page
        location.reload(); // Reload the page if no movies found
      }
    }, 500);
  } else {
    // If the query is empty, reload the page
    location.reload(); // Reload the page if the query is empty
  }
}
function loadMovie(url) {
    const iframe = document.querySelector('.movie-iframe'); // Select iframe by class
    iframe.src = url ? `${url}?autoplay=1` : 'about:blank'; // Load the URL with autoplay or fallback to a blank page
    iframe.scrollIntoView({ behavior: 'smooth' }); // Smoothly scroll to the iframe
}

// Handling the click event on the card
function handleCardClick(event) {
    const movieUrl = event.currentTarget.querySelector('.movie-url').innerText; // Get the hidden URL
    loadMovie(movieUrl); // Load the movie in the iframe
}

// Duration format


function displayMovies(moviesToDisplay) {
    const movieContainer = document.getElementById('movie-container');
    movieContainer.innerHTML = ''; // Clear existing content

    if (moviesToDisplay.length > 0) {
        moviesToDisplay.forEach(movie => {
            const movieCard = `
                <div class="movie-card" onclick="handleCardClick(event);">
                    <div class="card-inner">
                        <div class="card-front">
                                 <div class="quality-duration-genre">
        <div class="quality">${movie.quality}</div>
        <div class="duration">${movie.duration}</div>
<div class="genre">${movie.genre}</div>

    </div>
                            <img src="${movie.img}" alt="${movie.title}" />
                            <h1>${movie.title}</h1>

                        </div>
                        <div class="card-back">
                            <div class="synopsis">${movie.synopsis}</div>
                            <div class="movie-url" style="display: none;">${movie.url}</div> <!-- Hidden URL -->
                        </div>
                    </div>
                </div>
            `;
            movieContainer.innerHTML += movieCard;
        });
    } else {
        movieContainer.innerHTML = '<p>No movies found.</p>';
    }
}

// Call the function to display movies
displayMovies(movies);


function displayPaginatedMovies(page) {
    const startIndex = (page - 1) * moviesPerPage;
    const endIndex = Math.min(startIndex + moviesPerPage, movies.length);
    const movieContainer = document.getElementById('movie-container');
    movieContainer.innerHTML = '';

    if (startIndex < movies.length) {
        for (let i = startIndex; i < endIndex; i++) {
            const movie = movies[i];
            const movieCard = `
                <div class="movie-card" onclick="handleCardClick(event);">
                    <div class="card-inner">
                        <div class="card-front">
                              <div class="quality-duration-genre">
        <div class="quality">${movie.quality}</div>
        <div class="duration">${movie.duration}</div>
<div class="genre">${movie.genre}</div>

    </div>         <img src="${movie.img}" alt="${movie.title}" />
                            <h1>${movie.title}</h1>
  
                            <div class="movie-url" style="display: none;">${movie.url}</div> <!-- Hidden URL -->
                        </div>
                        <div class="card-back">
                            <div class="synopsis">${movie.synopsis}</div>
                        </div>
                    </div>
                </div>
            `;
            movieContainer.innerHTML += movieCard;
        }
    } else {
        movieContainer.innerHTML = '<p>No movies found.</p>';
    }

    document.getElementById('page-info').textContent = `Page ${page}`;
    document.getElementById('prev-btn').disabled = (page === 1);
    document.getElementById('next-btn').disabled = (endIndex >= movies.length);
}

// Pagination button event listeners
document.getElementById('prev-btn').addEventListener('click', () => {
    if (currentPage > 1) {
        currentPage--;
        displayPaginatedMovies(currentPage);
    }
});

document.getElementById('next-btn').addEventListener('click', () => {
    if (currentPage * moviesPerPage < movies.length) {
        currentPage++;
        displayPaginatedMovies(currentPage);
    }
});

// Initial display
displayPaginatedMovies(currentPage);
